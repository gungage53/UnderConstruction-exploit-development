#include <stdio.h>

//バッファーオーバーフローによって上書きされないよう、グローバル変数保持
FILE *fp;
int size;

int printHexDump(){
	int i;
	unsigned char buf[500];
	printf("buf = %p\n",&buf);
	printf("ファイルサイズ = %dByte\n",size);
	
	fread(buf,size,sizeof(unsigned char),fp);
	
	for(i = 0; i < size; i++){
		if(i % 10 == 0 && i > 0) printf("\n");
		printf("%02x", buf[i]);
		printf(" ");
	}
	printf("\n");
	
	//file close
	fclose(fp);
	
	return;
}

int main(int argc, char ** argv)
{	
	//file open
	fp = fopen(argv[1],"rb");
	
	//file size
	fseek(fp, 0, SEEK_END);
	size = ftell(fp);
	fseek(fp, 0, SEEK_SET);
	
	//print Hex Dump
	printHexDump();
	
	printf("出力完了\n");
	
	return 0;
}
